<!DOCTYPE html>
<html lang="es">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>Dashboard</title>

  <link rel="stylesheet" href="styles/dashstyindex.css">
  <link rel="stylesheet" href="styles/table-style.css">
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap"
    rel="stylesheet" />
</head>

<body>
  <div class="layout">
    <div class="sidebar" id="sidebar">
      <div class="sidebar-header">
        <img src="/files/logo-contacto.webp" alt="Logo MTD" class="logo-mtd" />
        <div id="user-info" style="margin-top: 16px; text-align: center;">
          <span id="nombre-usuario" style="font-weight: 600; display: block;"></span>
          <span id="correo-usuario" style="font-size: 0.8em; color: #2674e3; display: block;"></span>
        </div>
      </div>

      <nav class="menu">
        <a href="#" data-file="index.html">
          <img src="../auth/files/logosPQR/1. PENDIENTE.png" class="icono" />
          <span> PENDIENTE </span>
        </a>
        <a href="#" data-file="gestion.html">
          <img src="../auth/files/logosPQR/2. EN PROGRESO.png" class="icono" />
          <span> EN GESTION</span>
        </a>
        <a href="#" data-file="finalizadas.html">
          <img src="../auth/files/logosPQR/3. RESUELTO.png" class="icono" />
          <span> RESUELTA </span>
        </a>
        <a href="#" data-file="reporte.html">
          <img src="../auth/files/logosPQR/4. REPORTE.png" class="icono" />
          <span> REPORTE </span>
        </a>
          
        <!-- En tu sidebar -->
        <a href="#" id="logoutBtn" class="menu-logout">CERRAR SESION</a>

      </nav>
    </div>

    <div class="contenido" id="contenido">
      <p>Cargando vista inicial...</p>
    </div>
  </div>
  <script src="js/main.js"></script>
  <script src="js/reporte.js"></script>
  <script src="js/editarUsuario.js"></script>
  
  <script src="js/crear_usuarios.js"></script>
  


  <script>
    // Mostrar datos usuario logueado en el menÃº lateral
    fetch('/api/perfil', { credentials: 'include' })
      .then(res => {
        if (res.status === 401) return;
        return res.json();
      })
      .then(data => {
        if (data && data.success && data.data) {
          document.getElementById('nombre-usuario').textContent = data.data.nombre || '';
          document.getElementById('correo-usuario').textContent = data.data.correo || '';
        }
      });
  </script>
  
</body>

</html>